ui = true
disable_mlock = true
max_lease_ttl = "768h"
default_lease_ttl = "24h"

storage "raft" {
    path = "{{ vault_raft_dir }}"
    node_id = "{{ inventory_hostname }}"

{% for host in groups[vault_raft_cluster_inventory_group | default("vault")] %}
{% if host != inventory_hostname %}
    retry_join {
      leader_api_addr = "http://{{ hostvars[host]['ansible_default_ipv4']['address'] }}:8200"
    }
{% endif %}
{% endfor %}
}

listener "tcp" {
  address = "127.0.0.1:8200"
  cluster_addr = "127.0.0.1:8201"
  tls_disable = "true"
}

api_addr                = "http://{{ ansible_default_ipv4.address }}:8200"
cluster_addr            = "http://{{ ansible_default_ipv4.address }}:8201"
cluster_name            = "vault"
raw_storage_endpoint    = true
disable_sealwrap        = true
disable_printable_check = true
